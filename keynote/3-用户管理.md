# Linux-用户管理

## 简介
Linux系统是一个多用户多任务的分时操作系统，因为设计Linux系统的初衷就是为了满足多个用户同时工作的需求，因此也具备很好的安全性。用户账号一方面可以帮助系统管理员（一般是root用户）对使用系统的用户进行跟踪并控制他们对系统资源的访问，也可以房主用户组织文件，并为这些用户提供安全性保护。

每个用户账号都拥有一个唯一的用户名和各自的口令。
<table>
<tr>
<td bgcolor=orange>
Linux系统中存在三种<font color=red size=5 face="黑体" >用户</font>
</td>
</tr>
</table>

>1. root用户 ：管理员用户
>2. 系统用户（或伪用户）：系统为了避免因某个服务程序出现漏洞而被黑客提权至整台服务器，默认服务程序会有独立的系统用户负责运行，进而有效的控制被破坏范围。
>3. 普通用户

注意：uid不能冲突，其中：

* uid：0        root（管理员）
* uid：1~1000   系统用户
* uid：1000+    普通用户(RHEL6普通用户uid是从500开始）

root用户拥有最高的系统权限。

此外，Linux还有<font color=red size=5 face="黑体" >用户组</font>的概念，是为了方便管理属于同一个组的用户。在创建用户时，系统会自动创建一个与其同名的<font color=blue size=4 face="黑体" >基本用户组</font>，而这个基本用户组只有该用户一个人.如果该用户以后被纳入其它用户组，则这个其它用户组称之为<font color=blue size=4 face="黑体" >拓展用户组</font>。一个用户只有一个基本用户组，但是可以有多个拓展用户组。

>1. 基本组（私有组）
>2. 附加组（公有组）
>3. 系统组

根据账户功能，用户组分为：

* 超级用户组：0        root用户的gid
* 系统用户组：1~999    gid
* 本地用户组：1000+    gid

## 相关命令
<table>
<tr>
<td bgcolor=orange>
 用户的账号信息保存在/etc/passwd文件中,仅管理员可修改，其它用户仅可查看
 
 密码信息保存在/etc/shadow文件中，仅管理员看得见
</td>
</tr>
</table>

passwd文件内容如下:
>
>root:x:0:0:root:/root:/bin/bash
>
>daemon:x:1:1:daemon:/usr/sbin:/bin/sh
>
>bin:x:2:2:bin:/bin:/bin/sh
>
>sys:x:3:3:sys:/dev:/bin/sh

上面每一行都代表一个用户，每一行又通过[:]分为七个部分。
>1. 账号名称
>2. 原先用来保存密码的，现在密码都放在/etc/shadow中，所以这里显示x
>3. UID，也就是使用者ID。默认的系统管理员的UID为0，我们添加用户的时候最好使用1000以上的UID，1-1000范围的UID最好保留给系统用。
>4. GID，也就是群组ID
>5. 关于账号的一些说明信息（暂时可以忽略）
>6. 账号的家目录，家目录就是你登陆系统后默认的那个目录
>7. 账号使用的shell

shadow文件内容如下:
>
>root:!:15324:0:99999:7:::
>
>daemon:*:15259:0:99999:7:::
>
>bin:*:15259:0:99999:7:::
>
>letuknowit:$1$cPf/cIvr$sCws95uSip2ljTK052DDB.:15400:5:60:7:2:15490:

上面每一行都代表一个用户密码，每一行又通过[:]分为九个部分。
>1. 账号名称
>2. 加密后的密码，如果这一栏的第一个字符为!或者*的话，说明这是一个不能登录的账户，从上面可以看出，ubuntu默认的就不启用root账户。
>3. 最近改动密码的日期（这个是从1970年1月1日算起的总的天数）。那怎么才能知道今天距1970年1月1日有多少天呢？很简单，你改下密码，然后看下这个栏目中的数字是多少就可以了！
>4. 密码不可被变更的天数：设置了这个值，则表示从变更密码的日期算起，多少天内无法再次修改密码，如果是0的话，则没有限制
>5. 密码需要重新变更的天数：密码经常更换才能保证安全，为了提醒某些经常不更换密码的用户，可以设置一个天数，强制让用户更换密码，也就是说该用户的密码会在多少天后过期，如果为99999则没有限制
>6. 密码过期预警天数：如果在5中设置了密码需要重新变更的天数，则会在密码过期的前多少天进行提醒，提示用户其密码将在多少天后过期
>7. 密码过期的宽恕时间：如果在5中设置的日期过后，用户仍然没有修改密码，则该用户还可以继续使用的天数
>8. 账号失效日期，过了这个日期账号就不能用了
>9. 保留的


1. ### useradd
> 创建新用户，使用方法 useradd 选项 用户名
> #### 选项
>* -c  comment 指定一段注释性描述
>* -d  目录，指定用户主目录，若目录不存在，则同时使用-m选项创建主目录
>* -g  用户组，指定初始的用户基本组（必须存在）、
>* -G  用户组，指定用户所属的附加组
>* -s  Shell文件，指定用户的登陆Shell
>* -u  用户号，指定用户的用户号，若有-o选项，则可以重复使用其它用户的标识号。

2. ### userdel
> 删除用户，使用方法 userdel 选项 用户名；
> 删除用户时默认会将该用户的家目录保留
> #### 选项
>* -f 强制删除用户
>* -r 同时删除用户及用户家目录

3. ### id
> 查看用户信息，使用方法 id 用户名

>* -a  忽略
>* -g  只显示组id，基本组
>* -G  只显示附加组
>* -n  --name 对于-ugG 显示名字而不是数值
>* -r  --real 对于-ugG 显示真实id而不是有效id
>* -u  只显示用户id

4. ### groupadd
> 创建用户组，使用方法 groupadd 选项 群组名

>* -f  忽略
>* -g  基本组id
>* -o  允许添加一个使用非唯一gid的组
>* -r  创建一个系统组
 ### groupdel
 ### groupmod
 > 修改用户组，使用方法 groupmod 选项1 用户组  
 >-g 修改新的组id  
 >-o 与-g选项同时使用，可以使新gid与系统已有的用户组gid相同
 >-n 将用户组的名称修改为新名称

5. ### usermod
> 修改用户属性，使用方法 usermod 选项 用户名

>* -c  comment 修改注释性描述
>* -d -m  参数-m 与参数-d 连用，可重新指定用户的家目录并自动把旧的数据转移过去
>* -e  账户的到期时间，格式为YYYY-MM-DD
>* -g  变更所属基本用户组
>* -G  变更所属的附加用户组
>* -s  变更默认终端
>* -u  修改用户的用户号
>* -L  锁定用户禁止其登陆系统
>* -U  解锁用户，允许其登录系统

6. ### passwd
> 修改用户密码，过期时间，认证信息等，使用方法 passwd 选项 用户名

普通用户只能修改自己密码，root可以改其他人密码且不需要老密码

>* -l  锁定用户，禁止其登录
>* -u  解锁，允许登录
>* --stdin  允许通过标准输入修改用户密码，
>   
>例:echo "passwd" | passwd --stdin username
>* -d  使该用户可用空密码登录
>* -e  强制用户在下次登录时修改密码
>* -S  显示用户密码是否被锁定，以及密码所采用的加密算法名称

















